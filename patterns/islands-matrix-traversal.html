<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islands (Matrix Traversal) Pattern - DSA Patterns</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            position: relative;
        }

        .back-button {
            display: inline-block;
            color: white;
            text-decoration: none;
            font-size: 1.1em;
            margin-bottom: 20px;
            padding: 8px 16px;
            border: 2px solid white;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: white;
            color: #667eea;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .category-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .section h3 {
            color: #2c3e50;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        .section p {
            color: #555;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .diagram {
            margin: 25px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }

        .diagram-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .matrix-grid {
            display: grid;
            grid-template-columns: repeat(5, 55px);
            gap: 3px;
            margin: 15px 0;
        }

        .matrix-cell {
            width: 55px;
            height: 55px;
            border: 1px solid #999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            border-radius: 4px;
        }

        .matrix-cell.island-1 {
            background: #ff9800;
            color: white;
        }

        .matrix-cell.island-2 {
            background: #9c27b0;
            color: white;
        }

        .matrix-cell.island-3 {
            background: #4caf50;
            color: white;
        }

        .matrix-cell.water {
            background: #e3f2fd;
            color: #999;
        }

        .matrix-cell.current {
            background: #ff5722;
            color: white;
            border: 3px solid #d32f2f;
            animation: pulse 1s infinite;
        }

        .matrix-cell.visited {
            background: #9e9e9e;
            color: white;
        }

        .matrix-cell.exploring {
            background: #ffeb3b;
            color: #333;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .step-container {
            margin: 20px 0;
        }

        .step-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .direction-arrows {
            margin-top: 15px;
            padding: 15px;
            background: #fff;
            border-radius: 5px;
            text-align: center;
        }

        .arrow-label {
            color: #666;
            font-size: 0.9em;
            margin: 5px;
        }

        .animation-controls {
            margin-top: 20px;
            text-align: center;
        }

        .animation-controls button {
            background: #667eea;
            color: white;
            border: none;
            padding: 0;
            margin: 0 5px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            transition: all 0.3s ease;
            width: 50px;
            height: 50px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .animation-controls button:hover:not(:disabled) {
            background: #5568d3;
            transform: scale(1.1);
        }

        .animation-controls button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            opacity: 0.5;
        }

        .step-container {
            display: none;
        }

        .step-container.active {
            display: block;
        }

        .problem-box {
            margin: 25px 0;
            padding: 20px;
            background: #f0f7ff;
            border-left: 4px solid #667eea;
            border-radius: 4px;
        }

        .problem-box strong {
            color: #667eea;
            font-size: 1.1em;
        }

        .example-box {
            background: #fff;
            padding: 15px;
            margin-top: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            border: 1px solid #e0e0e0;
        }

        .code-example {
            margin: 25px 0;
            padding: 20px;
            background: #2c3e50;
            color: #ecf0f1;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            overflow-x: auto;
            line-height: 1.6;
            white-space: pre;
        }

        .code-example .keyword {
            color: #c678dd;
        }

        .code-example .function {
            color: #61afef;
        }

        .code-example .string {
            color: #98c379;
        }

        .code-example .comment {
            color: #5c6370;
            font-style: italic;
        }

        .explanation-box {
            margin: 25px 0;
            padding: 20px;
            background: #f9f9f9;
            border-left: 4px solid #4caf50;
            border-radius: 4px;
        }

        .explanation-box strong {
            color: #4caf50;
            font-size: 1.1em;
        }

        .explanation-box ol, .explanation-box ul {
            margin: 15px 0 15px 25px;
        }

        .explanation-box li {
            color: #555;
            margin-bottom: 10px;
            line-height: 1.8;
        }

        .complexity {
            margin: 25px 0;
            padding: 15px 20px;
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            border-radius: 4px;
        }

        .complexity strong {
            color: #e65100;
        }

        .practice-problems {
            margin-top: 30px;
        }

        .difficulty-section {
            margin-bottom: 40px;
        }

        .difficulty-section h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .problem-item {
            background: #fff;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .problem-item:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .problem-header {
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            background: #f8f9fa;
            transition: background 0.3s ease;
        }

        .problem-header:hover {
            background: #e9ecef;
        }

        .problem-difficulty {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: bold;
            color: white;
        }

        .problem-difficulty.easy {
            background: #4caf50;
        }

        .problem-difficulty.medium {
            background: #ff9800;
        }

        .problem-difficulty.hard {
            background: #f44336;
        }

        .problem-title {
            flex: 1;
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.05em;
        }

        .expand-icon {
            color: #667eea;
            font-size: 1.2em;
            transition: transform 0.3s ease;
        }

        .problem-item.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .problem-details {
            display: none;
            padding: 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
        }

        .problem-details p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #555;
        }

        .problem-details pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border-left: 3px solid #667eea;
            overflow-x: auto;
            margin: 10px 0;
        }

        .problem-details a {
            display: inline-block;
            margin-top: 10px;
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .problem-details a:hover {
            color: #5568d3;
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }

            .content {
                padding: 20px;
            }

            .matrix-grid {
                grid-template-columns: repeat(5, 40px);
            }

            .matrix-cell {
                width: 40px;
                height: 40px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="../index.html" class="back-button">← Back to All Patterns</a>
            <h1>Pattern 2: Islands (Matrix Traversal)</h1>
            <span class="category-badge">Matrices & Graphs</span>
        </header>

        <div class="content">
            <div class="section">
                <h2>Pattern Overview</h2>
                <p>This pattern describes all the efficient ways of traversing a matrix (or 2D array). It's extensively used in problems involving grids, islands, and connected components. The typical approach involves using DFS (Depth-First Search) or BFS (Breadth-First Search) to explore all connected cells.</p>
                <p>The key insight is to mark visited cells to avoid revisiting them, and to explore all 4 (or 8) adjacent directions from each cell. This pattern reduces time complexity and provides elegant solutions to matrix problems.</p>
            </div>

            <div style="background: #e0e7ff; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h3 style="color: #2d3748; margin-bottom: 10px;">Problem: Number of Islands</h3>
                <p style="color: #4a5568; line-height: 1.8; margin-bottom: 15px;">
                    Given a 2D grid map of '1's (land) and '0's (water), count the number of islands. An island is surrounded by water and is formed by connecting adjacent lands horizontally or vertically. You may assume all four edges of the grid are surrounded by water.
                </p>

                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <strong>Example:</strong><br>
                    <strong style="color: #667eea;">Input:</strong> grid = [<br>
                    &nbsp;&nbsp;['1','1','1','0','0'],<br>
                    &nbsp;&nbsp;['0','1','1','0','0'],<br>
                    &nbsp;&nbsp;['0','0','1','0','0'],<br>
                    &nbsp;&nbsp;['0','0','0','1','1'],<br>
                    &nbsp;&nbsp;['0','0','0','1','0']<br>
                    ]<br>
                    <strong style="color: #10b981;">Output:</strong> 3 islands
                </div>

                <h3 style="color: #2d3748; margin: 15px 0 10px 0;">How it works:</h3>
                <ul style="color: #4a5568; line-height: 1.8; margin-left: 20px;">
                    <li><strong>Scan the grid</strong> row by row, column by column</li>
                    <li>When you find an unvisited <strong>land cell ('1')</strong>, increment the island counter</li>
                    <li>Use <strong>DFS (Depth-First Search)</strong> to mark all connected land cells as visited</li>
                    <li>DFS explores in 4 directions: <strong>Up, Down, Left, Right</strong></li>
                    <li>Mark visited cells by changing '1' to '0' to avoid counting the same island twice</li>
                    <li>Continue scanning until the entire grid is processed</li>
                    <li>This approach reduces time complexity from O(n²×m²) to O(n×m)</li>
                </ul>
            </div>

            <div class="section">
                <h2>Animated Visual Diagram</h2>
                <p style="color: #555; margin-bottom: 20px;">
                    Watch how DFS explores the matrix to find all 3 islands. We scan the grid row by row,
                    and when we find an unvisited land cell, we increment the island count and use DFS to mark all connected cells.
                </p>

                <div class="diagram">
                    <div class="step-container active" id="step-1">
                        <div class="step-title">Step 1: Scan starts - Found first island at (0,0) | Island Count = 1</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell current">1</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            Found land at (0,0)! Increment island count to 1 and start DFS to explore entire island
                        </p>
                    </div>

                    <div class="step-container" id="step-2">
                        <div class="step-title">Step 2: DFS from (0,0) - Check DOWN → (1,0) is water, skip it!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>DFS checks DOWN first:</strong> (1,0) is water (0). DFS only explores land (1), so skip this direction.
                        </p>
                    </div>

                    <div class="step-container" id="step-3">
                        <div class="step-title">Step 3: DFS from (0,0) - Check RIGHT → (0,1) is land, explore it!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell current">1</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>Check RIGHT:</strong> (0,1) is land (1)! Mark as visited and recursively explore from here.
                        </p>
                    </div>

                    <div class="step-container" id="step-4">
                        <div class="step-title">Step 4: DFS from (0,1) - Check DOWN → (1,1) is land, explore it!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell current">1</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>From (0,1), check DOWN:</strong> (1,1) is land (1)! Continue DFS exploration.
                        </p>
                    </div>

                    <div class="step-container" id="step-5">
                        <div class="step-title">Step 5: DFS from (1,1) - Check RIGHT → (1,2) is land, explore it!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell island-1">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell current">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>From (1,1), check RIGHT:</strong> (1,2) is land (1)! Mark and continue exploring.
                        </p>
                    </div>

                    <div class="step-container" id="step-6">
                        <div class="step-title">Step 6: DFS from (1,2) - Check UP → (0,2) is land, explore it!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell current">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>From (1,2), check UP:</strong> (0,2) is land (1)! Mark it as visited.
                        </p>
                    </div>

                    <div class="step-container" id="step-7">
                        <div class="step-title">Step 7: DFS from (0,2) - Check RIGHT → (0,3) is water, skip!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>Check RIGHT from (0,2):</strong> (0,3) is water (0). Skip - can't continue exploring through water!
                        </p>
                    </div>

                    <div class="step-container" id="step-8">
                        <div class="step-title">Step 8: DFS from (1,2) - Check RIGHT → (1,3) is water, skip!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>Check RIGHT from (1,2):</strong> (1,3) is water (0). Skip - water blocks exploration to the right!
                        </p>
                    </div>

                    <div class="step-container" id="step-9">
                        <div class="step-title">Step 9: DFS from (1,2) - Check DOWN → (2,2) is water, skip!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>Check DOWN from (1,2):</strong> (2,2) is water (0). Skip - isolated from other land by water!
                        </p>
                    </div>

                    <div class="step-container" id="step-10">
                        <div class="step-title">Step 10: Checking water at (0,4) and (1,4) - All directions blocked!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>Positions (0,4) and (1,4):</strong> Also water cells - never explored because (0,3) and (1,3) already blocked access!
                        </p>
                    </div>

                    <div class="step-container" id="step-11">
                        <div class="step-title">Step 11: First island fully explored - All 5 connected cells marked</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>DFS complete for island 1!</strong> All connected land cells marked as visited. Water (0) acts as barriers.
                        </p>
                    </div>

                    <div class="step-container" id="step-12">
                        <div class="step-title">Step 12: Continue scanning - Skip visited cells and water</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-2">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            Continue scanning row by row. Skip visited cells (V) and water (0). Looking for next unvisited land (1)...
                        </p>
                    </div>

                    <div class="step-container" id="step-13">
                        <div class="step-title">Step 13: Found second island at (2,0) | Island Count = 2</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell current">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            Found new unvisited land at (2,0)! Increment count to 2 and start DFS. This island is isolated (surrounded by water).
                        </p>
                    </div>

                    <div class="step-container" id="step-14">
                        <div class="step-title">Step 14: Second island complete - Continue scanning</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            Second island only has one cell (no connected neighbors). DFS checks all 4 directions - all water! Continue scanning...
                        </p>
                    </div>

                    <div class="step-container" id="step-15">
                        <div class="step-title">Step 15: Scanning row 2 → (2,1), (2,2), (2,3), (2,4) all water, skip!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>Scanning remaining row 2:</strong> Positions (2,1) through (2,4) are all water - skip them all!
                        </p>
                    </div>

                    <div class="step-container" id="step-16">
                        <div class="step-title">Step 16: Start row 3 → (3,0) is water, skip!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>Row 3, position (3,0):</strong> Water cell - skip and continue scanning...
                        </p>
                    </div>

                    <div class="step-container" id="step-17">
                        <div class="step-title">Step 17: Scanning row 3 → (3,1), (3,2) also water, skip!</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell water" style="border: 3px solid red;">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            <strong>Continue row 3:</strong> (3,1) and (3,2) are both water - skip them. Almost at (3,3)...
                        </p>
                    </div>

                    <div class="step-container" id="step-18">
                        <div class="step-title">Step 18: Found third island at (3,3) | Island Count = 3</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell current">1</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell island-3">1</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            Found third unvisited land at (3,3)! Increment count to 3 and start DFS to explore connected cells.
                        </p>
                    </div>

                    <div class="step-container" id="step-19">
                        <div class="step-title">Step 19: DFS exploring third island → (3,4), (4,3)</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            DFS explores all connected cells: (3,4) horizontally connected, (4,3) vertically connected to (3,3).
                        </p>
                    </div>

                    <div class="step-container" id="step-20">
                        <div class="step-title">Step 20: Complete! All 3 islands found | Final Count = 3</div>
                        <div class="matrix-grid">
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell water">0</div>
                            <div class="matrix-cell visited">V</div>
                            <div class="matrix-cell water">0</div>
                        </div>
                        <p style="color: #666; font-size: 0.95em;">
                            Grid scan complete! All land cells visited. Result: <strong>3 distinct islands</strong>
                        </p>
                    </div>

                    <div class="animation-controls">
                        <button id="backBtn" onclick="backStep()" disabled title="Previous Step">◀</button>
                        <button id="playBtn" onclick="playStep()" title="Next Step">▶</button>
                        <button id="resetBtn" onclick="resetAnimation()" disabled title="Reset">⟲</button>
                    </div>

                    <div class="direction-arrows">
                        <div style="font-weight: bold; color: #667eea; margin-bottom: 10px;">DFS Exploration Order</div>
                        <div class="arrow-label">
                            For each cell, DFS tries: <strong>Down → Up → Right → Left</strong>
                        </div>
                        <div class="arrow-label" style="margin-top: 10px;">
                            <span style="background: #ff5722; color: white; padding: 4px 8px; border-radius: 3px;">Current</span>
                            <span style="background: #9e9e9e; color: white; padding: 4px 8px; border-radius: 3px; margin-left: 10px;">Visited</span>
                            <span style="background: #ff9800; color: white; padding: 4px 8px; border-radius: 3px; margin-left: 10px;">Unvisited Land</span>
                            <span style="background: #e3f2fd; color: #999; padding: 4px 8px; border-radius: 3px; margin-left: 10px;">Water</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>More Examples</h2>

                <div class="problem-box" style="margin-bottom: 20px;">
                    <strong>Example 1: Single Large Island</strong>
                    <div style="margin-top: 15px;">
                        <div class="example-box">
                            <strong>Input:</strong><br>
                            grid = [<br>
                            &nbsp;&nbsp;['1','1','1','1','0'],<br>
                            &nbsp;&nbsp;['1','1','0','1','0'],<br>
                            &nbsp;&nbsp;['1','1','0','0','0'],<br>
                            &nbsp;&nbsp;['0','0','0','0','0']<br>
                            ]<br>
                            <strong>Output:</strong> 1<br>
                            <strong>Explanation:</strong> All the 1's are connected, forming a single island
                        </div>
                    </div>
                </div>

                <div class="problem-box" style="margin-bottom: 20px;">
                    <strong>Example 2: Multiple Small Islands</strong>
                    <div style="margin-top: 15px;">
                        <div class="example-box">
                            <strong>Input:</strong><br>
                            grid = [<br>
                            &nbsp;&nbsp;['1','1','0','0','0'],<br>
                            &nbsp;&nbsp;['1','1','0','0','0'],<br>
                            &nbsp;&nbsp;['0','0','1','0','0'],<br>
                            &nbsp;&nbsp;['0','0','0','1','1']<br>
                            ]<br>
                            <strong>Output:</strong> 3<br>
                            <strong>Explanation:</strong> Three separate islands exist in different regions
                        </div>
                    </div>
                </div>

                <div class="problem-box">
                    <strong>Example 3: No Islands</strong>
                    <div style="margin-top: 15px;">
                        <div class="example-box">
                            <strong>Input:</strong><br>
                            grid = [<br>
                            &nbsp;&nbsp;['0','0','0','0','0'],<br>
                            &nbsp;&nbsp;['0','0','0','0','0'],<br>
                            &nbsp;&nbsp;['0','0','0','0','0']<br>
                            ]<br>
                            <strong>Output:</strong> 0<br>
                            <strong>Explanation:</strong> All cells are water, no land exists
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>Solution Code</h2>
                <div class="code-example"><span class="comment">// Count number of islands using DFS</span>
<span class="keyword">public static int</span> <span class="function">numIslands</span>(<span class="keyword">char</span>[][] grid) {
    <span class="keyword">if</span> (grid == <span class="keyword">null</span> || grid.length == 0) {
        <span class="keyword">return</span> 0;
    }
    <span class="keyword">int</span> count = 0;

    <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i &lt; grid.length; i++) {
        <span class="keyword">for</span> (<span class="keyword">int</span> j = 0; j &lt; grid[0].length; j++) {
            <span class="keyword">if</span> (grid[i][j] == <span class="string">'1'</span>) {
                count++;
                dfs(grid, i, j);
            }
        }
    }
    <span class="keyword">return</span> count;
}

<span class="keyword">private static void</span> <span class="function">dfs</span>(<span class="keyword">char</span>[][] grid, <span class="keyword">int</span> i, <span class="keyword">int</span> j) {
    <span class="keyword">if</span> (i &lt; 0 || i &gt;= grid.length || j &lt; 0 ||
        j &gt;= grid[0].length || grid[i][j] == <span class="string">'0'</span>) {
        <span class="keyword">return</span>;
    }
    grid[i][j] = <span class="string">'0'</span>; <span class="comment">// Mark as visited</span>
    dfs(grid, i + 1, j); dfs(grid, i - 1, j); <span class="comment">// Down, Up</span>
    dfs(grid, i, j + 1); dfs(grid, i, j - 1); <span class="comment">// Right, Left</span>
}</div>
            </div>

            <div class="section">
                <h2>Solution Explanation</h2>
                <div class="explanation-box">
                    <strong>Step-by-Step Breakdown:</strong>
                    <p style="margin-top: 10px; color: #555; line-height: 1.6;">
                        This solution uses Depth-First Search (DFS) to explore and mark all connected land cells:
                    </p>
                    <ol>
                        <li><strong>Iterate through the grid:</strong> Traverse each cell in the 2D grid using nested loops.</li>
                        <li><strong>Find unvisited land:</strong> When we encounter a '1' (land), we've found a new island:
                            <ul style="margin-left: 20px; margin-top: 5px;">
                                <li>Increment the island counter</li>
                                <li>Launch DFS to mark all connected land cells</li>
                            </ul>
                        </li>
                        <li><strong>DFS traversal:</strong> The DFS function recursively:
                            <ul style="margin-left: 20px; margin-top: 5px;">
                                <li>Checks boundaries and if current cell is land</li>
                                <li>Marks current cell as visited by changing '1' to '0'</li>
                                <li>Recursively explores all 4 adjacent cells (up, down, left, right)</li>
                            </ul>
                        </li>
                        <li><strong>Return result:</strong> After processing all cells, return the total island count.</li>
                    </ol>
                    <p style="margin-top: 15px; color: #555; line-height: 1.6;">
                        <strong>Key Insight:</strong> By marking visited cells as '0', we avoid revisiting them and ensure each island
                        is counted exactly once. The DFS explores the entire island in one go.
                    </p>
                </div>
            </div>

            <div class="section">
                <h2>Complexity Analysis</h2>
                <div class="complexity">
                    <strong>Time Complexity:</strong> O(m × n) | <strong>Space Complexity:</strong> O(m × n) for recursion stack
                </div>
                <div style="margin-top: 15px; color: #555; line-height: 1.6;">
                    <p><strong>Time Complexity: O(m × n)</strong></p>
                    <ul style="margin-left: 20px; margin-top: 5px;">
                        <li>m = number of rows, n = number of columns</li>
                        <li>In worst case, we visit every cell once in the nested loops: O(m × n)</li>
                        <li>Each cell is processed at most twice (once in main loop, once in DFS)</li>
                        <li>DFS marks cells as visited, so no cell is processed multiple times</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Space Complexity: O(m × n)</strong></p>
                    <ul style="margin-left: 20px; margin-top: 5px;">
                        <li>In worst case (all land cells forming one island), DFS call stack can go as deep as m × n</li>
                        <li>Recursion stack space: O(m × n) in worst case</li>
                        <li>No additional data structures used (modifying input grid in-place)</li>
                    </ul>
                </div>
            </div>

            <div class="section">
                <h2>Common Use Cases</h2>
                <ul style="margin-left: 25px; color: #555; line-height: 1.8;">
                    <li>Number of Islands</li>
                    <li>Flood Fill</li>
                    <li>Max Area of Island</li>
                    <li>Surrounded Regions</li>
                    <li>Number of Closed Islands</li>
                    <li>Number of Distinct Islands</li>
                </ul>
            </div>

            <div class="section practice-problems">
                <h2>Practice Problems</h2>
                <p style="color: #555; margin-bottom: 25px;">Master the Islands (Matrix Traversal) pattern with these 15 curated LeetCode problems. Click on any problem to see the full description, examples, and constraints.</p>

                <div class="difficulty-section">
                    <h3>Easy Problems (5)</h3>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem1')">
                            <span class="problem-difficulty easy">Easy</span>
                            <span class="problem-title">733. Flood Fill</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem1" class="problem-details">
                            <p><strong>Description:</strong> An image is represented by an m x n integer grid image where image[i][j] represents the pixel value of the image. You are also given three integers sr, sc, and color. You should perform a flood fill on the image starting from the pixel image[sr][sc].</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: image = [[1,1,1],[1,1,0],[1,0,1]], sr = 1, sc = 1, color = 2
Output: [[2,2,2],[2,2,0],[2,0,1]]
Explanation: From the center of the image with position (sr, sc) = (1, 1) (i.e., the red pixel), all pixels connected by a path of the same color as the starting pixel are colored with the new color.</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>m == image.length</li>
                                <li>n == image[i].length</li>
                                <li>1 <= m, n <= 50</li>
                                <li>0 <= image[i][j], color < 2^16</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/flood-fill/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem2')">
                            <span class="problem-difficulty easy">Easy</span>
                            <span class="problem-title">463. Island Perimeter</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem2" class="problem-details">
                            <p><strong>Description:</strong> You are given row x col grid representing a map where grid[i][j] = 1 represents land and grid[i][j] = 0 represents water. Grid cells are connected horizontally/vertically (not diagonally). There is exactly one island. Determine the perimeter of the island.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: grid = [[0,1,0,0],[1,1,1,0],[0,1,0,0],[1,1,0,0]]
Output: 16
Explanation: The perimeter is the 16 yellow stripes in the image.</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>row == grid.length</li>
                                <li>col == grid[i].length</li>
                                <li>1 <= row, col <= 100</li>
                                <li>grid[i][j] is 0 or 1</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/island-perimeter/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem3')">
                            <span class="problem-difficulty easy">Easy</span>
                            <span class="problem-title">1254. Number of Closed Islands</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem3" class="problem-details">
                            <p><strong>Description:</strong> Given a 2D grid consists of 0s (land) and 1s (water). An island is a maximal 4-directionally connected group of 0s and a closed island is an island totally (all left, top, right, bottom) surrounded by 1s. Return the number of closed islands.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: grid = [[1,1,1,1,1,1,1,0],[1,0,0,0,0,1,1,0],[1,0,1,0,1,1,1,0],[1,0,0,0,0,1,0,1],[1,1,1,1,1,1,1,0]]
Output: 2
Explanation: Islands in grey are closed because they are completely surrounded by water (group of 1s).</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>1 <= grid.length, grid[0].length <= 100</li>
                                <li>0 <= grid[i][j] <= 1</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/number-of-closed-islands/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem4')">
                            <span class="problem-difficulty easy">Easy</span>
                            <span class="problem-title">1020. Number of Enclaves</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem4" class="problem-details">
                            <p><strong>Description:</strong> You are given an m x n binary matrix grid, where 0 represents a sea cell and 1 represents a land cell. A move consists of walking from one land cell to another adjacent (4-directionally) land cell or walking off the boundary of the grid. Return the number of land cells in grid for which we cannot walk off the boundary of the grid in any number of moves.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: grid = [[0,0,0,0],[1,0,1,0],[0,1,1,0],[0,0,0,0]]
Output: 3
Explanation: There are three 1s that are enclosed by 0s, and one 1 that is not enclosed because its on the boundary.</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>m == grid.length</li>
                                <li>n == grid[i].length</li>
                                <li>1 <= m, n <= 500</li>
                                <li>grid[i][j] is either 0 or 1</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/number-of-enclaves/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem5')">
                            <span class="problem-difficulty easy">Easy</span>
                            <span class="problem-title">1905. Count Sub Islands</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem5" class="problem-details">
                            <p><strong>Description:</strong> You are given two m x n binary matrices grid1 and grid2 containing only 0's (representing water) and 1's (representing land). An island is a group of 1's connected 4-directionally. An island in grid2 is considered a sub-island if there is an island in grid1 that contains all the cells that make up this island in grid2.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: grid1 = [[1,1,1,0,0],[0,1,1,1,1],[0,0,0,0,0],[1,0,0,0,0],[1,1,0,1,1]], grid2 = [[1,1,1,0,0],[0,0,1,1,1],[0,1,0,0,0],[1,0,1,1,0],[0,1,0,1,0]]
Output: 3
Explanation: In the picture above, the grid on the left is grid1 and the grid on the right is grid2.
The 1s colored red in grid2 are those considered to be part of a sub-island. There are three sub-islands.</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>m == grid1.length == grid2.length</li>
                                <li>n == grid1[i].length == grid2[i].length</li>
                                <li>1 <= m, n <= 500</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/count-sub-islands/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>
                </div>

                <div class="difficulty-section">
                    <h3>Medium Problems (5)</h3>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem6')">
                            <span class="problem-difficulty medium">Medium</span>
                            <span class="problem-title">200. Number of Islands</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem6" class="problem-details">
                            <p><strong>Description:</strong> Given an m x n 2D binary grid grid which represents a map of '1's (land) and '0's (water), return the number of islands. An island is surrounded by water and is formed by connecting adjacent lands horizontally or vertically.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: grid = [
  ["1","1","1","1","0"],
  ["1","1","0","1","0"],
  ["1","1","0","0","0"],
  ["0","0","0","0","0"]
]
Output: 1</pre>
                            <p><strong>Example 2:</strong></p>
                            <pre>Input: grid = [
  ["1","1","0","0","0"],
  ["1","1","0","0","0"],
  ["0","0","1","0","0"],
  ["0","0","0","1","1"]
]
Output: 3</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>m == grid.length</li>
                                <li>n == grid[i].length</li>
                                <li>1 <= m, n <= 300</li>
                                <li>grid[i][j] is '0' or '1'</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/number-of-islands/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem7')">
                            <span class="problem-difficulty medium">Medium</span>
                            <span class="problem-title">695. Max Area of Island</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem7" class="problem-details">
                            <p><strong>Description:</strong> You are given an m x n binary matrix grid. An island is a group of 1's (representing land) connected 4-directionally (horizontal or vertical.) You may assume all four edges of the grid are surrounded by water. The area of an island is the number of cells with a value 1 in the island. Return the maximum area of an island in grid. If there is no island, return 0.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: grid = [[0,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,0,0,0],[0,1,1,0,1,0,0,0,0,0,0,0,0],[0,1,0,0,1,1,0,0,1,0,1,0,0]]
Output: 6
Explanation: The answer is not 11, because the island must be connected 4-directionally.</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>m == grid.length</li>
                                <li>n == grid[i].length</li>
                                <li>1 <= m, n <= 50</li>
                                <li>grid[i][j] is either 0 or 1</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/max-area-of-island/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem8')">
                            <span class="problem-difficulty medium">Medium</span>
                            <span class="problem-title">130. Surrounded Regions</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem8" class="problem-details">
                            <p><strong>Description:</strong> You are given an m x n matrix board containing letters 'X' and 'O', capture regions that are surrounded. A region is captured by flipping all 'O's into 'X's in that surrounded region. A region is surrounded with 'X's if you can connect the region with 'X's and none of the region cells are on the edge of the board.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: board = [["X","X","X","X"],["X","O","O","X"],["X","X","O","X"],["X","O","X","X"]]
Output: [["X","X","X","X"],["X","X","X","X"],["X","X","X","X"],["X","O","X","X"]]
Explanation: Notice that an 'O' should not be flipped if it is on the border.</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>m == board.length</li>
                                <li>n == board[i].length</li>
                                <li>1 <= m, n <= 200</li>
                                <li>board[i][j] is 'X' or 'O'</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/surrounded-regions/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem9')">
                            <span class="problem-difficulty medium">Medium</span>
                            <span class="problem-title">417. Pacific Atlantic Water Flow</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem9" class="problem-details">
                            <p><strong>Description:</strong> There is an m x n rectangular island that borders both the Pacific Ocean and Atlantic Ocean. Water can only flow in four directions (up, down, left, or right) from a cell to another one with height equal or lower. Find all cells where water can flow to both the Pacific and Atlantic oceans.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: heights = [[1,2,2,3,5],[3,2,3,4,4],[2,4,5,3,1],[6,7,1,4,5],[5,1,1,2,4]]
Output: [[0,4],[1,3],[1,4],[2,2],[3,0],[3,1],[4,0]]
Explanation: The following cells can flow to the Pacific and Atlantic oceans: [0,4], [1,3], [1,4], [2,2], [3,0], [3,1], [4,0]</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>m == heights.length</li>
                                <li>n == heights[r].length</li>
                                <li>1 <= m, n <= 200</li>
                                <li>0 <= heights[r][c] <= 10^5</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/pacific-atlantic-water-flow/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem10')">
                            <span class="problem-difficulty medium">Medium</span>
                            <span class="problem-title">694. Number of Distinct Islands</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem10" class="problem-details">
                            <p><strong>Description:</strong> Given a non-empty 2D array grid of 0's and 1's, an island is a group of 1's (representing land) connected 4-directionally (horizontal or vertical.) You may assume all four edges of the grid are surrounded by water. Count the number of distinct islands. An island is considered to be the same as another if they have the same shape.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: grid = [[1,1,0,0,0],[1,1,0,0,0],[0,0,0,1,1],[0,0,0,1,1]]
Output: 1
Explanation: Two islands have the same shape.</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>m == grid.length</li>
                                <li>n == grid[i].length</li>
                                <li>1 <= m, n <= 50</li>
                                <li>grid[i][j] is either 0 or 1</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/number-of-distinct-islands/" target="_blank">Solve on LeetCode → (Premium)</a></p>
                        </div>
                    </div>
                </div>

                <div class="difficulty-section">
                    <h3>Hard Problems (5)</h3>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem11')">
                            <span class="problem-difficulty hard">Hard</span>
                            <span class="problem-title">827. Making A Large Island</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem11" class="problem-details">
                            <p><strong>Description:</strong> You are given an n x n binary matrix grid. You are allowed to change at most one 0 to be 1. Return the size of the largest island in grid after applying this operation. An island is a 4-directionally connected group of 1s.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: grid = [[1,0],[0,1]]
Output: 3
Explanation: Change one 0 to 1 and connect two 1s, then we get an island with area = 3.</pre>
                            <p><strong>Example 2:</strong></p>
                            <pre>Input: grid = [[1,1],[1,0]]
Output: 4
Explanation: Change the 0 to 1 makes the island bigger.</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>n == grid.length</li>
                                <li>n == grid[i].length</li>
                                <li>1 <= n <= 500</li>
                                <li>grid[i][j] is either 0 or 1</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/making-a-large-island/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem12')">
                            <span class="problem-difficulty hard">Hard</span>
                            <span class="problem-title">778. Swim in Rising Water</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem12" class="problem-details">
                            <p><strong>Description:</strong> You are given an n x n integer matrix grid where each value grid[i][j] represents the elevation at that point (i, j). The rain starts to fall. At time t, the depth of the water everywhere is t. You can swim from a square to another 4-directionally adjacent square if the elevation of both squares is at most t. Return the minimum time t where you can swim from the top left square (0, 0) to the bottom right square (n - 1, n - 1).</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: grid = [[0,2],[1,3]]
Output: 3
Explanation: At time 0, you are in grid location (0, 0). You cannot go anywhere else because 4-directionally adjacent neighbors have higher elevation than t = 0.
At time 3, all squares are available.</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>n == grid.length</li>
                                <li>n == grid[i].length</li>
                                <li>1 <= n <= 50</li>
                                <li>0 <= grid[i][j] < n^2</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/swim-in-rising-water/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem13')">
                            <span class="problem-difficulty hard">Hard</span>
                            <span class="problem-title">1970. Last Day Where You Can Still Cross</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem13" class="problem-details">
                            <p><strong>Description:</strong> There is a 1-based binary matrix where 0 represents land and 1 represents water. You are given integers row and col representing the number of rows and columns in the matrix, respectively. Initially on day 0, the entire matrix is land. However, each day a new cell becomes flooded with water. You are given an array cells, where cells[i] = [ri, ci] represents that on the ith day, the cell on the rith row and cith column becomes flooded with water. You want to find the last day that it is possible to walk from the top to the bottom by only walking on land cells.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: row = 2, col = 2, cells = [[1,1],[2,1],[1,2],[2,2]]
Output: 2
Explanation: The above image depicts how the matrix changes each day starting from day 0.
The last day where it is possible to cross from top to bottom is on day 2.</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>2 <= row, col <= 2 * 10^4</li>
                                <li>4 <= row * col <= 2 * 10^4</li>
                                <li>cells.length == row * col</li>
                                <li>1 <= ri <= row</li>
                                <li>1 <= ci <= col</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/last-day-where-you-can-still-cross/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem14')">
                            <span class="problem-difficulty hard">Hard</span>
                            <span class="problem-title">1559. Detect Cycles in 2D Grid</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem14" class="problem-details">
                            <p><strong>Description:</strong> Given a 2D array of characters grid of size m x n, you need to find if there exists any cycle consisting of the same value in grid. A cycle is a path of length 4 or more in the grid that starts and ends at the same cell. The length of a cycle is the number of cells visited in the cycle. Return true if any cycle of the same value exists in grid, otherwise, return false.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: grid = [["a","a","a","a"],["a","b","b","a"],["a","b","b","a"],["a","a","a","a"]]
Output: true
Explanation: There are two valid cycles: a-a-a-a-a and b-b-b-b</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>m == grid.length</li>
                                <li>n == grid[i].length</li>
                                <li>1 <= m, n <= 500</li>
                                <li>grid consists only of lowercase English letters</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/detect-cycles-in-2d-grid/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>

                    <div class="problem-item">
                        <div class="problem-header" onclick="toggleProblem('problem15')">
                            <span class="problem-difficulty hard">Hard</span>
                            <span class="problem-title">1162. As Far from Land as Possible</span>
                            <span class="expand-icon">▼</span>
                        </div>
                        <div id="problem15" class="problem-details">
                            <p><strong>Description:</strong> Given an n x n grid containing only values 0 and 1, where 0 represents water and 1 represents land, find a water cell such that its distance to the nearest land cell is maximized, and return the distance. If no land or water exists in the grid, return -1. The distance used in this problem is the Manhattan distance.</p>
                            <p><strong>Example 1:</strong></p>
                            <pre>Input: grid = [[1,0,1],[0,0,0],[1,0,1]]
Output: 2
Explanation: The cell (1, 1) is as far as possible from all the land with distance 2.</pre>
                            <p><strong>Example 2:</strong></p>
                            <pre>Input: grid = [[1,0,0],[0,0,0],[0,0,0]]
Output: 4
Explanation: The cell (2, 2) is as far as possible from all the land with distance 4.</pre>
                            <p><strong>Constraints:</strong></p>
                            <ul>
                                <li>n == grid.length</li>
                                <li>n == grid[i].length</li>
                                <li>1 <= n <= 100</li>
                                <li>grid[i][j] is 0 or 1</li>
                            </ul>
                            <p><a href="https://leetcode.com/problems/as-far-from-land-as-possible/" target="_blank">Solve on LeetCode →</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Master this pattern through consistent practice. Good luck!</p>
            <p style="margin-top: 10px; opacity: 0.8;">© 2025 DSA Coding Patterns Guide</p>
        </footer>
    </div>

    <script>
        // Toggle problem details
        function toggleProblem(id) {
            var element = document.getElementById(id);
            var problemItem = element.parentElement;

            if (element.style.display === "none" || element.style.display === "") {
                element.style.display = "block";
                problemItem.classList.add('expanded');
            } else {
                element.style.display = "none";
                problemItem.classList.remove('expanded');
            }
        }

        // Island DFS Visualization Animation
        let currentStep = 1;
        const totalSteps = 20;

        function showStep(stepNumber) {
            // Hide all steps
            for (let i = 1; i <= totalSteps; i++) {
                const step = document.getElementById(`step-${i}`);
                if (step) {
                    step.classList.remove('active');
                }
            }

            // Show current step
            const currentStepElement = document.getElementById(`step-${stepNumber}`);
            if (currentStepElement) {
                currentStepElement.classList.add('active');
            }
        }

        function playStep() {
            // Enable reset and back buttons after first play
            document.getElementById('resetBtn').disabled = false;
            document.getElementById('backBtn').disabled = false;

            if (currentStep < totalSteps) {
                currentStep++;
                showStep(currentStep);
            }

            // Disable play button if at end
            if (currentStep >= totalSteps) {
                document.getElementById('playBtn').disabled = true;
            }
        }

        function backStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);

                // Enable play button when moving back
                document.getElementById('playBtn').disabled = false;

                // Disable back button if we're at the start
                if (currentStep === 1) {
                    document.getElementById('backBtn').disabled = true;
                }
            }
        }

        function resetAnimation() {
            currentStep = 1;
            document.getElementById('playBtn').disabled = false;
            document.getElementById('resetBtn').disabled = true;
            document.getElementById('backBtn').disabled = true;
            showStep(currentStep);
        }

        // Initialize animation on page load
        window.addEventListener('load', () => {
            showStep(1);
        });
    </script>
</body>
</html>